version: '3.9'
services:
  server:
    image: "nginx:1.22.1-alpine"
    volumes:
      - "./storage:/usr/share/nginx/html"
    healthcheck:
      test: ["CMD", "service", "nginx", "status"]
      interval: 30s
      timeout: 30s
      retries: 3
      start_period: 5s
    ports:
      - "127.0.0.1:80:80"
  app:
    build:
      context: "./"
    volumes:
      - "./storage:"
    ports:
      - "127.0.0.1:8000:8000"
